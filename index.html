<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Mathematical Calculator with Ten Variables</title>

    <link rel="manifest" href="manifest.json">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5712588524765113"
     crossorigin="anonymous"></script>
    
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Main content container - centered with space for ads */
        .main-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        @media (min-width: 1024px) {
            .main-container {
                grid-template-columns: 200px 1fr 200px;
                gap: 30px;
            }
        }
        
        /* Ad containers */
        .ad-sidebar {
            display: none;
        }
        
        @media (min-width: 1024px) {
            .ad-sidebar {
                display: block;
                min-height: 600px;
                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                border-radius: 10px;
                border: 1px solid #dee2e6;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #6c757d;
                font-size: 14px;
                text-align: center;
                padding: 20px;
            }
        }
        
        /* Content area */
        .content-area {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            padding: 25px;
            width: 100%;
        }
        
        /* Header styles */
        .app-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .app-header img {
            max-width: 100%;
            height: auto;
            margin-bottom: 15px;
        }
        
        .app-title {
            font-size: 16px;
            color: #495057;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .app-subtitle {
            font-size: 13px;
            color: #6c757d;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        /* Export controls */
        .export-controls {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            border: 1px solid #90caf9;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(33, 150, 243, 0.2);
        }
        
        .download-btn:hover {
            background: linear-gradient(135deg, #1976D2 0%, #1565C0 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(33, 150, 243, 0.3);
        }
        
        #downloadStatus {
            display: block;
            margin-top: 10px;
            color: #1976D2;
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Calculator containers */
        .calculators-container {
            margin-bottom: 30px;
        }
        
        .calculation-group {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .calculation-group:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-color: #dee2e6;
        }
        
        .expression-container {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .calc-label {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            min-width: 80px;
        }
        
        .result-input {
            flex: 1;
            min-width: 120px;
            height: 36px;
            font-size: 13px;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .result-input:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }
        
        .notes-input {
            flex: 2;
            min-width: 150px;
            height: 36px;
            font-size: 13px;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            background: white;
        }
        
        /* Input fields */
        .calc-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .calc-input {
            flex: 1;
            min-width: 250px;
            height: 40px;
            font-size: 14px;
            padding: 8px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .calc-input:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        .syntax-hint {
            font-size: 11px;
            color: #6c757d;
            line-height: 1.4;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid #4CAF50;
        }
        
        .syntax-hint b {
            color: #2c3e50;
        }
        
        /* Output fields */
        .result-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }
        
        .result-label {
            font-size: 14px;
            font-weight: 600;
            color: #FF0000;
        }
        
        output {
            flex: 1;
            height: 40px;
            font-size: 15px;
            font-weight: 600;
            padding: 8px 15px;
            border: 2px solid #dc3545;
            border-radius: 8px;
            background: white;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            min-width: 150px;
        }
        
        /* Save buttons */
        .save-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .save-btn:hover {
            background: linear-gradient(135deg, #45a049 0%, #3d8b40 100%);
            transform: translateY(-1px);
        }
        
        .saved-indicator {
            color: #4CAF50;
            font-size: 11px;
            font-weight: 500;
            padding: 4px 8px;
            background: #e8f5e9;
            border-radius: 4px;
            display: none;
        }
        
        /* Add calculator button */
        #addCalculatorBtn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #28a745 0%, #218838 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin: 10px 0 25px 0;
            transition: all 0.3s ease;
        }
        
        #addCalculatorBtn:hover {
            background: linear-gradient(135deg, #218838 0%, #1e7e34 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
        }
        
        /* Variable inputs section */
        .variables-section {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-radius: 12px;
            border: 1px solid #ffd166;
        }
        
        .section-header {
            font-size: 16px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ffd166;
        }
        
        .unit-converter-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            margin-left: 15px;
            transition: all 0.3s ease;
        }
        
        .unit-converter-btn:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1f639e 100%);
            transform: translateY(-1px);
        }
        
        .variable-input {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        
        .variable-name-input {
            width: 70px;
            height: 36px;
            font-size: 13px;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            background: white;
            text-align: center;
            font-weight: 600;
        }
        
        .variable-value-input {
            width: 100px;
            height: 36px;
            font-size: 13px;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            background: white;
        }
        
        .unit-input {
            width: 80px;
            height: 36px;
            font-size: 13px;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            background: white;
        }
        
        .variable-info {
            font-size: 11px;
            color: #2c3e50;
            line-height: 1.4;
            margin-left: 15px;
            flex: 1;
            min-width: 200px;
        }
        
        /* Notes field */
        .notes-section {
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .notes-field {
            width: 100%;
            min-height: 120px;
            font-size: 13px;
            padding: 15px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            background: white;
            resize: vertical;
            margin-top: 10px;
            line-height: 1.5;
        }
        
        .notes-save-btn {
            margin-top: 10px;
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
        }
        
        .notes-save-btn:hover {
            background: linear-gradient(135deg, #138496 0%, #117a8b 100%);
        }
        
        /* Unit converter modal */
        #unitConverterModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow: auto;
        }
        
        #unitConverterContent {
            background-color: #FFFFFF;
            margin: 20px auto;
            padding: 25px;
            border-radius: 12px;
            width: 95%;
            max-width: 900px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        #closeUnitConverter {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
        }
        
        .converter-section {
            margin-bottom: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        
        .converter-section h2 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 18px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .converter-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }
        
        .input-group {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .input-group input[type="number"] {
            padding: 10px;
            width: 140px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .input-group select {
            padding: 10px;
            min-width: 180px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background-color: white;
            font-size: 14px;
        }
        
        .input-group button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        
        .input-group button:hover {
            background: linear-gradient(135deg, #1976D2 0%, #1565C0 100%);
        }
        
        .result {
            font-weight: bold;
            color: #2c3e50;
            font-size: 16px;
            padding: 10px 15px;
            background: #e8f5e9;
            border-radius: 8px;
            min-width: 150px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main-container {
                padding: 10px;
            }
            
            .content-area {
                padding: 15px;
            }
            
            .expression-container {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            
            .calc-label {
                min-width: 100%;
                margin-bottom: 5px;
            }
            
            .result-input,
            .notes-input,
            .calc-input {
                min-width: 100%;
            }
            
            .variable-input {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .variable-name-input,
            .variable-value-input,
            .unit-input {
                width: 100%;
            }
            
            .variable-info {
                margin-left: 0;
                margin-top: 5px;
            }
            
            .input-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .input-group input[type="number"],
            .input-group select {
                width: 100%;
            }
        }
        
        /* Footer */
        .app-footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #6c757d;
            font-size: 12px;
            border-top: 1px solid #e9ecef;
            width: 100%;
        }
        
        /* Install app button */
        #installApp {
            display: none;
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            margin: 10px auto;
            transition: all 0.3s ease;
        }
        
        #installApp:hover {
            background: linear-gradient(135deg, #f57c00 0%, #ef6c00 100%);
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Left Ad Sidebar (Desktop only) -->
        <div class="ad-sidebar left-sidebar">
            <div>Advertisement Space<br>(300x600)</div>
        </div>
        
        <!-- Main Content Area -->
        <div class="content-area">
            <!-- Export Controls -->
            <div class="export-controls">
                <button class="download-btn" onclick="downloadAsHTML()">‚¨áÔ∏è Download Calculator as HTML</button>
                <span id="downloadStatus"></span>
            </div>
            
            <!-- App Header -->
            <div class="app-header">
                <img src="title.jpg" alt="Math Tool Box">
                <div class="app-title">
                    <i>for scientific, engineering, and day-to-day calculations</i>
                    <span style="font-size: 18px;">&#9881;</span>
                    <span style="font-size: 18px;">&#9787;</span>
                    <span style="font-size: 18px;">&#9786;</span>
                </div>
                
                <button id="installApp" style="display: none;">Install App</button>
                
                <div class="app-subtitle">
                    Example equations: <i><b>PV = nRT</b></i> (ideal gas law), <i><b>Net present value = Rt/(1+i)^t</b></i>, etc.
                </div>
            </div>
            
            <!-- Container for all calculators -->
            <div id="calculatorsContainer" class="calculators-container">
                <!-- First Calculation Group -->
                <div class="calculation-group">
                    <div class="expression-container">
                        <label class="calc-label">Calculator:</label>
                        <input type="text" class="result-input" id="resultField1" placeholder="variable name (e.g. P)">
                        <button class="save-btn" onclick="saveInput('resultField1')">üíæ Save</button>
                        <span class="saved-indicator" id="saved_resultField1">‚úì Saved</span>
                        <input type="text" class="notes-input" placeholder="Notes (e.g. P means pressure)" id="notesField1">
                        <button class="save-btn" onclick="saveInput('notesField1')">üíæ Save</button>
                        <span class="saved-indicator" id="saved_notesField1">‚úì Saved</span>
                    </div>
                    
                    <div class="calc-input-container">
                        <input type="text" class="calc-input" id="inputField1" placeholder="a function (e.g. n*R*T/V)">
                        <button class="save-btn" onclick="saveInput('inputField1')">üíæ Save Expression</button>
                        <span class="saved-indicator" id="saved_inputField1">‚úì Saved</span>
                    </div>
                    
                    <div class="syntax-hint">
                        <b>Syntax:</b> for log use <b>logx(y)</b> where x is the base, <b>pi = 3.14159</b>, <b>e = 2.718</b><br>
                        <b>sin-1(x)</b> returns sin inverse of x, <b>angles in degrees in trigonometric calculations</b>
                    </div>
                    
                    <div class="result-container">
                        <label class="result-label">Result:</label>
                        <output id="outputField1">0</output>
                    </div>
                </div>

                <!-- Second Calculation Group -->
                <div class="calculation-group">
                    <div class="expression-container">
                        <label class="calc-label">Calculator:</label>
                        <input type="text" class="result-input" id="resultField2" placeholder="variable name">
                        <button class="save-btn" onclick="saveInput('resultField2')">üíæ Save</button>
                        <span class="saved-indicator" id="saved_resultField2">‚úì Saved</span>
                        <input type="text" class="notes-input" placeholder="Notes" id="notesField2">
                        <button class="save-btn" onclick="saveInput('notesField2')">üíæ Save</button>
                        <span class="saved-indicator" id="saved_notesField2">‚úì Saved</span>
                    </div>
                    
                    <div class="calc-input-container">
                        <input type="text" class="calc-input" id="inputField2" placeholder="e.g., x! + y * sin(z) + log2(a) + b - c + d - e + f + g">
                        <button class="save-btn" onclick="saveInput('inputField2')">üíæ Save Expression</button>
                        <span class="saved-indicator" id="saved_inputField2">‚úì Saved</span>
                    </div>
                    
                    <div class="result-container">
                        <label class="result-label">Result:</label>
                        <output id="outputField2">0</output>
                    </div>
                </div>
            </div>

            <!-- Add Calculator Button -->
            <button id="addCalculatorBtn">‚ûï Add More Calculators</button>
            
            <div class="app-subtitle" style="text-align: center; margin: 15px 0;">
                List of equations: chemistry, physics, statistics, engineering, economics. (to be updated)
            </div>

            <!-- Variable Input Fields Section -->
            <div class="variables-section">
                <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px;">
                    <div class="section-header">
                        Enter variable names and values with <span style="color: #FF0000;">consistent units</span>
                    </div>
                    <button onclick="showUnitConverter()" class="unit-converter-btn">üìê Unit Converter</button>
                </div>

                <!-- Variable Input Fields -->
                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName1" placeholder="V">
                    <button class="save-btn" onclick="saveInput('variableName1')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName1">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue1" placeholder="value (e.g., 10)">
                    <button class="save-btn" onclick="saveInput('variableValue1')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue1">‚úì</span>
                    <input type="text" class="unit-input" id="unit1" placeholder="unit">
                    <button class="save-btn" onclick="saveInput('unit1')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit1">‚úì</span>
                    <div class="variable-info">
                        The 7 SI units: Second (s, time), metre (m, length), kilogram (kg, mass),
                        ampere (A, electric current), kelvin (K, thermodynamic temperature),
                        mole (mol, amount of substance), and candela (cd, luminous intensity).
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName2" placeholder="n">
                    <button class="save-btn" onclick="saveInput('variableName2')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName2">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue2" placeholder="value (e.g., 2)">
                    <button class="save-btn" onclick="saveInput('variableValue2')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue2">‚úì</span>
                    <input type="text" class="unit-input" id="unit2" placeholder="unit">
                    <button class="save-btn" onclick="saveInput('unit2')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit2">‚úì</span>
                    <div class="variable-info">
                        1 mile = 1760 yards (1.6093 km)<br>
                        1 yard = 3 feet<br>
                        1 furlong = 220 yard (201.168 meter)
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName3" placeholder="R">
                    <button class="save-btn" onclick="saveInput('variableName3')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName3">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue3" placeholder="value (e.g., 8.314)">
                    <button class="save-btn" onclick="saveInput('variableValue3')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue3">‚úì</span>
                    <input type="text" class="unit-input" id="unit3" placeholder="unit">
                    <button class="save-btn" onclick="saveInput('unit3')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit3">‚úì</span>
                    <div class="variable-info">
                        1 foot (feet) = 12 inch<br>
                        1 inch = 2.54 cm<br>
                        1 foot (feet) = 30.48 cm
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName4" placeholder="T">
                    <button class="save-btn" onclick="saveInput('variableName4')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName4">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue4" placeholder="value (e.g., 300)">
                    <button class="save-btn" onclick="saveInput('variableValue4')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue4">‚úì</span>
                    <input type="text" class="unit-input" id="unit4" placeholder="unit">
                    <button class="save-btn" onclick="saveInput('unit4')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit4">‚úì</span>
                    <div class="variable-info">
                        1 hector = 10000 m¬≤ = 107639.147 sqft<br>
                        1 m¬≤ = 10.7639 sqft<br>
                        1 hector = 2.471 acre, 1 acre = 43,560 sqft
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName5" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableName5')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName5">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue5" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableValue5')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue5">‚úì</span>
                    <input type="text" class="unit-input" id="unit5" placeholder="">
                    <button class="save-btn" onclick="saveInput('unit5')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit5">‚úì</span>
                    <div class="variable-info">
                        1 metric ton = 1000 kg<br>
                        1 ton (US) = 2000 pound (907.18 kg)<br>
                        1 pound = 16 ounce
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName6" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableName6')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName6">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue6" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableValue6')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue6">‚úì</span>
                    <input type="text" class="unit-input" id="unit6" placeholder="">
                    <button class="save-btn" onclick="saveInput('unit6')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit6">‚úì</span>
                    <div class="variable-info">
                        1 pound = 453.592 gm = 0.4536 kg<br>
                        1 ounce = 28.3495 gm<br>
                        1 kg = 2.2046 pound
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName7" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableName7')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName7">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue7" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableValue7')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue7">‚úì</span>
                    <input type="text" class="unit-input" id="unit7" placeholder="">
                    <button class="save-btn" onclick="saveInput('unit7')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit7">‚úì</span>
                    <div class="variable-info">
                        1 decimeter = 10 centimeter<br>
                        1 decameter = 10 meter<br>
                        1 decigram = 0.1 gram
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName8" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableName8')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName8">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue8" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableValue8')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue8">‚úì</span>
                    <input type="text" class="unit-input" id="unit8" placeholder="">
                    <button class="save-btn" onclick="saveInput('unit8')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit8">‚úì</span>
                    <div class="variable-info">
                        1 decagram = 10 gram<br>
                        1 deciliter = 100 milliliter<br>
                        1 decaliter = 10 liter
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName9" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableName9')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName9">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue9" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableValue9')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue9">‚úì</span>
                    <input type="text" class="unit-input" id="unit9" placeholder="">
                    <button class="save-btn" onclick="saveInput('unit9')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit9">‚úì</span>
                    <div class="variable-info">
                        Avogadro's number (Na): 6.022√ó10¬≤¬≥ mol‚Åª¬π<br>
                        Boltzmann constant (k): 1.380649√ó10‚Åª¬≤¬≥ m¬≤ kg s‚Åª¬≤ K‚Åª¬π<br>
                        Planck's constant (h): 6.62607015√ó10‚Åª¬≥‚Å¥ m¬≤ kg / s
                    </div>
                </div>

                <div class="variable-input">
                    <input type="text" class="variable-name-input" id="variableName10" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableName10')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableName10">‚úì</span>
                    <span style="font-size: 16px; font-weight: bold;">:</span>
                    <input type="text" class="variable-value-input" id="variableValue10" placeholder="">
                    <button class="save-btn" onclick="saveInput('variableValue10')">üíæ</button>
                    <span class="saved-indicator" id="saved_variableValue10">‚úì</span>
                    <input type="text" class="unit-input" id="unit10" placeholder="">
                    <button class="save-btn" onclick="saveInput('unit10')">üíæ</button>
                    <span class="saved-indicator" id="saved_unit10">‚úì</span>
                    <div class="variable-info">
                        Elementary charge (e): 1.60217663√ó10‚Åª¬π‚Åπ coulombs<br>
                        Faraday constant (F): 96,485.3321 sA / mol<br>
                        The gas constant (R): is 8.314 J / mol¬∑K.
                    </div>
                </div>
            </div>

            <!-- Notes Input Field -->
            <div class="notes-section">
                <label style="font-size: 14px; font-weight: 600; color: #2c3e50;">Notes:</label>
                <div id="notesField" class="notes-field" contenteditable="true" placeholder="Write your notes here..."></div>
                <button class="save-btn notes-save-btn" onclick="saveNotes()">üíæ Save Notes</button>
                <span class="saved-indicator" id="saved_notesField">‚úì Saved</span>
                <div style="font-size: 11px; color: #6c757d; margin-top: 10px; font-style: italic;">
                    Advanced scientific calculator, All purpose scientific calculator, Excel like calculator
                </div>
            </div>

            <div class="app-footer">
                <div id="unitConverterBtn" style="display: none;">All Unit Converter</div>
                <div style="margin-top: 10px;">¬© Math Tool Box Calculator</div>
            </div>
        </div>
        
        <!-- Right Ad Sidebar (Desktop only) -->
        <div class="ad-sidebar right-sidebar">
            <div>Advertisement Space<br>(300x600)</div>
        </div>
    </div>

    <!-- Unit Converter Modal -->
    <div id="unitConverterModal">
        <div id="unitConverterContent">
            <button id="closeUnitConverter" onclick="closeUnitConverter()">√ó</button>
            <div style="font-size: 22px; font-weight: bold; color: #2c3e50; margin-bottom: 25px; text-align: center;">
                Universal Unit Converter
            </div>
            
            <!-- Length Converter -->
            <div class="converter-section">
                <h2>Length Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="length-value" placeholder="Value" step="any">
                        <select id="length-from">
                            <option value="pm">Picometers (pm)</option>
                            <option value="nm">Nanometers (nm)</option>
                            <option value="Œºm">Micrometers (Œºm)</option>
                            <option value="mm">Millimeters (mm)</option>
                            <option value="cm">Centimeters (cm)</option>
                            <option value="dm">Decimeters (dm)</option>
                            <option value="m" selected>Meters (m)</option>
                            <option value="dam">Decameters (dam)</option>
                            <option value="hm">Hectometers (hm)</option>
                            <option value="km">Kilometers (km)</option>
                            <option value="in">Inches (in)</option>
                            <option value="ft">Feet (ft)</option>
                            <option value="yd">Yards (yd)</option>
                            <option value="mi">Miles (mi)</option>
                            <option value="nmi">Nautical Miles (nmi)</option>
                            <option value="ly">Light Years (ly)</option>
                            <option value="au">Astronomical Units (AU)</option>
                            <option value="pc">Parsecs (pc)</option>
                        </select>
                        <span>to</span>
                        <select id="length-to">
                            <option value="pm">Picometers (pm)</option>
                            <option value="nm">Nanometers (nm)</option>
                            <option value="Œºm">Micrometers (Œºm)</option>
                            <option value="mm">Millimeters (mm)</option>
                            <option value="cm" selected>Centimeters (cm)</option>
                            <option value="dm">Decimeters (dm)</option>
                            <option value="m">Meters (m)</option>
                            <option value="dam">Decameters (dam)</option>
                            <option value="hm">Hectometers (hm)</option>
                            <option value="km">Kilometers (km)</option>
                            <option value="in">Inches (in)</option>
                            <option value="ft">Feet (ft)</option>
                            <option value="yd">Yards (yd)</option>
                            <option value="mi">Miles (mi)</option>
                            <option value="nmi">Nautical Miles (nmi)</option>
                            <option value="ly">Light Years (ly)</option>
                            <option value="au">Astronomical Units (AU)</option>
                            <option value="pc">Parsecs (pc)</option>
                        </select>
                        <button onclick="convertLength()">Convert</button>
                        <span class="result" id="length-result">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Weight Converter -->
            <div class="converter-section">
                <h2>Weight Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="weight-value" placeholder="Value" step="any">
                        <select id="weight-from">
                            <option value="Œºg">Micrograms (Œºg)</option>
                            <option value="mg">Milligrams (mg)</option>
                            <option value="cg">Centigrams (cg)</option>
                            <option value="dg">Decigrams (dg)</option>
                            <option value="g">Grams (g)</option>
                            <option value="dag">Decagrams (dag)</option>
                            <option value="hg">Hectograms (hg)</option>
                            <option value="kg" selected>Kilograms (kg)</option>
                            <option value="t">Metric Tons (t)</option>
                            <option value="oz">Ounces (oz)</option>
                            <option value="lb">Pounds (lb)</option>
                            <option value="st">Stones (st)</option>
                            <option value="ust">US Tons (short ton)</option>
                            <option value="ukt">UK Tons (long ton)</option>
                        </select>
                        <span>to</span>
                        <select id="weight-to">
                            <option value="Œºg">Micrograms (Œºg)</option>
                            <option value="mg">Milligrams (mg)</option>
                            <option value="cg">Centigrams (cg)</option>
                            <option value="dg">Decigrams (dg)</option>
                            <option value="g" selected>Grams (g)</option>
                            <option value="dag">Decagrams (dag)</option>
                            <option value="hg">Hectograms (hg)</option>
                            <option value="kg">Kilograms (kg)</option>
                            <option value="t">Metric Tons (t)</option>
                            <option value="oz">Ounces (oz)</option>
                            <option value="lb">Pounds (lb)</option>
                            <option value="st">Stones (st)</option>
                            <option value="ust">US Tons (short ton)</option>
                            <option value="ukt">UK Tons (long ton)</option>
                        </select>
                        <button onclick="convertWeight()">Convert</button>
                        <span class="result" id="weight-result">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Volume Converter -->
            <div class="converter-section">
                <h2>Volume Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="volume-value" placeholder="Value" step="any">
                        <select id="volume-from">
                            <option value="Œºl">Microliters (Œºl)</option>
                            <option value="ml">Milliliters (ml)</option>
                            <option value="cl">Centiliters (cl)</option>
                            <option value="dl">Deciliters (dl)</option>
                            <option value="l" selected>Liters (l)</option>
                            <option value="dal">Decaliters (dal)</option>
                            <option value="hl">Hectoliters (hl)</option>
                            <option value="kl">Kiloliters (kl)</option>
                            <option value="m3">Cubic Meters (m¬≥)</option>
                            <option value="tsp">Teaspoons (tsp)</option>
                            <option value="tbsp">Tablespoons (tbsp)</option>
                            <option value="floz">Fluid Ounces (fl oz)</option>
                            <option value="cup">Cups (cup)</option>
                            <option value="pt">Pints (pt)</option>
                            <option value="qt">Quarts (qt)</option>
                            <option value="gal">Gallons (gal)</option>
                            <option value="in3">Cubic Inches (in¬≥)</option>
                            <option value="ft3">Cubic Feet (ft¬≥)</option>
                            <option value="yd3">Cubic Yards (yd¬≥)</option>
                        </select>
                        <span>to</span>
                        <select id="volume-to">
                            <option value="Œºl">Microliters (Œºl)</option>
                            <option value="ml" selected>Milliliters (ml)</option>
                            <option value="cl">Centiliters (cl)</option>
                            <option value="dl">Deciliters (dl)</option>
                            <option value="l">Liters (l)</option>
                            <option value="dal">Decaliters (dal)</option>
                            <option value="hl">Hectoliters (hl)</option>
                            <option value="kl">Kiloliters (kl)</option>
                            <option value="m3">Cubic Meters (m¬≥)</option>
                            <option value="tsp">Teaspoons (tsp)</option>
                            <option value="tbsp">Tablespoons (tbsp)</option>
                            <option value="floz">Fluid Ounces (fl oz)</option>
                            <option value="cup">Cups (cup)</option>
                            <option value="pt">Pints (pt)</option>
                            <option value="qt">Quarts (qt)</option>
                            <option value="gal">Gallons (gal)</option>
                            <option value="in3">Cubic Inches (in¬≥)</option>
                            <option value="ft3">Cubic Feet (ft¬≥)</option>
                            <option value="yd3">Cubic Yards (yd¬≥)</option>
                        </select>
                        <button onclick="convertVolume()">Convert</button>
                        <span class="result" id="volume-result">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Area Converter -->
            <div class="converter-section">
                <h2>Area Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="area-value" placeholder="Value" step="any">
                        <select id="area-from">
                            <option value="mm2">Square Millimeters (mm¬≤)</option>
                            <option value="cm2">Square Centimeters (cm¬≤)</option>
                            <option value="m2" selected>Square Meters (m¬≤)</option>
                            <option value="ha">Hectares (ha)</option>
                            <option value="km2">Square Kilometers (km¬≤)</option>
                            <option value="in2">Square Inches (in¬≤)</option>
                            <option value="ft2">Square Feet (ft¬≤)</option>
                            <option value="yd2">Square Yards (yd¬≤)</option>
                            <option value="ac">Acres (ac)</option>
                            <option value="mi2">Square Miles (mi¬≤)</option>
                        </select>
                        <span>to</span>
                        <select id="area-to">
                            <option value="mm2">Square Millimeters (mm¬≤)</option>
                            <option value="cm2" selected>Square Centimeters (cm¬≤)</option>
                            <option value="m2">Square Meters (m¬≤)</option>
                            <option value="ha">Hectares (ha)</option>
                            <option value="km2">Square Kilometers (km¬≤)</option>
                            <option value="in2">Square Inches (in¬≤)</option>
                            <option value="ft2">Square Feet (ft¬≤)</option>
                            <option value="yd2">Square Yards (yd¬≤)</option>
                            <option value="ac">Acres (ac)</option>
                            <option value="mi2">Square Miles (mi¬≤)</option>
                        </select>
                        <button onclick="convertArea()">Convert</button>
                        <span class="result" id="area-result">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Temperature Converter -->
            <div class="converter-section">
                <h2>Temperature Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="temp-value" placeholder="Value" step="any">
                        <select id="temp-from">
                            <option value="c" selected>Celsius (¬∞C)</option>
                            <option value="f">Fahrenheit (¬∞F)</option>
                            <option value="k">Kelvin (K)</option>
                            <option value="r">Rankine (¬∞R)</option>
                        </select>
                        <span>to</span>
                        <select id="temp-to">
                            <option value="c">Celsius (¬∞C)</option>
                            <option value="f" selected>Fahrenheit (¬∞F)</option>
                            <option value="k">Kelvin (K)</option>
                            <option value="r">Rankine (¬∞R)</option>
                        </select>
                        <button onclick="convertTemperature()">Convert</button>
                        <span class="result" id="temp-result">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Pressure Converter -->
            <div class="converter-section">
                <h2>Pressure Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="pressure-value" placeholder="Value" step="any">
                        <select id="pressure-from">
                            <option value="pa">Pascals (Pa)</option>
                            <option value="kpa" selected>Kilopascals (kPa)</option>
                            <option value="mpa">Megapascals (MPa)</option>
                            <option value="bar">Bar (bar)</option>
                            <option value="mbar">Millibar (mbar)</option>
                            <option value="atm">Atmospheres (atm)</option>
                            <option value="mmhg">mmHg (mm Hg)</option>
                            <option value="inhg">inHg (in Hg)</option>
                            <option value="psi">PSI (lb/in¬≤)</option>
                            <option value="psf">PSF (lb/ft¬≤)</option>
                        </select>
                        <span>to</span>
                        <select id="pressure-to">
                            <option value="pa">Pascals (Pa)</option>
                            <option value="kpa">Kilopascals (kPa)</option>
                            <option value="mpa">Megapascals (MPa)</option>
                            <option value="bar" selected>Bar (bar)</option>
                            <option value="mbar">Millibar (mbar)</option>
                            <option value="atm">Atmospheres (atm)</option>
                            <option value="mmhg">mmHg (mm Hg)</option>
                            <option value="inhg">inHg (in Hg)</option>
                            <option value="psi">PSI (lb/in¬≤)</option>
                            <option value="psf">PSF (lb/ft¬≤)</option>
                        </select>
                        <button onclick="convertPressure()">Convert</button>
                        <span class="result" id="pressure-result">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Flow Converter -->
            <div class="converter-section">
                <h2>Flow Rate Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="flow-value" placeholder="Value" step="any">
                        <select id="flow-from">
                            <option value="lps">Liters per second (l/s)</option>
                            <option value="lpm" selected>Liters per minute (l/min)</option>
                            <option value="lph">Liters per hour (l/h)</option>
                            <option value="m3ps">Cubic meters per second (m¬≥/s)</option>
                            <option value="m3pm">Cubic meters per minute (m¬≥/min)</option>
                            <option value="m3ph">Cubic meters per hour (m¬≥/h)</option>
                            <option value="mlps">Milliliters per second (ml/s)</option>
                            <option value="mlpm">Milliliters per minute (ml/min)</option>
                            <option value="mlph">Milliliters per hour (ml/h)</option>
                            <option value="gps">Gallons per second (gal/s)</option>
                            <option value="gpm">Gallons per minute (gal/min)</option>
                            <option value="gph">Gallons per hour (gal/h)</option>
                            <option value="cfm">Cubic feet per minute (ft¬≥/min)</option>
                            <option value="cfh">Cubic feet per hour (ft¬≥/h)</option>
                        </select>
                        <span>to</span>
                        <select id="flow-to">
                            <option value="lps">Liters per second (l/s)</option>
                            <option value="lpm">Liters per minute (l/min)</option>
                            <option value="lph" selected>Liters per hour (l/h)</option>
                            <option value="m3ps">Cubic meters per second (m¬≥/s)</option>
                            <option value="m3pm">Cubic meters per minute (m¬≥/min)</option>
                            <option value="m3ph">Cubic meters per hour (m¬≥/h)</option>
                            <option value="mlps">Milliliters per second (ml/s)</option>
                            <option value="mlpm">Milliliters per minute (ml/min)</option>
                            <option value="mlph">Milliliters per hour (ml/h)</option>
                            <option value="gps">Gallons per second (gal/s)</option>
                            <option value="gpm">Gallons per minute (gal/min)</option>
                            <option value="gph">Gallons per hour (gal/h)</option>
                            <option value="cfm">Cubic feet per minute (ft¬≥/min)</option>
                            <option value="cfh">Cubic feet per hour (ft¬≥/h)</option>
                        </select>
                        <button onclick="convertFlow()">Convert</button>
                        <span class="result" id="flow-result">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Energy Converter -->
            <div class="converter-section">
                <h2>Energy Converter</h2>
                <div class="converter-container">
                    <div class="input-group">
                        <input type="number" id="energy-value" placeholder="Value" step="any">
                        <select id="energy-from">
                            <option value="j">Joules (J)</option>
                            <option value="kj">Kilojoules (kJ)</option>
                            <option value="mj">Megajoules (MJ)</option>
                            <option value="cal">Calories (cal)</option>
                            <option value="kcal">Kilocalories (kcal)</option>
                            <option value="wh">Watt-hours (Wh)</option>
                            <option value="kwh" selected>Kilowatt-hours (kWh)</option>
                            <option value="mwh">Megawatt-hours (MWh)</option>
                            <option value="btu">British Thermal Units (BTU)</option>
                            <option value="mmbtu">Million BTU (MMBTU)</option>
                            <option value="ftlb">Foot-pounds (ft¬∑lb)</option>
                            <option value="ev">Electronvolts (eV)</option>
                            <option value="kev">Kiloelectronvolts (keV)</option>
                            <option value="mev">Megaelectronvolts (MeV)</option>
                            <option value="gev">Gigaelectronvolts (GeV)</option>
                            <option value="tep">Tonnes of oil equivalent (toe)</option>
                            <option value="tce">Tonnes of coal equivalent (tce)</option>
                        </select>
                        <span>to</span>
                        <select id="energy-to">
                            <option value="j">Joules (J)</option>
                            <option value="kj">Kilojoules (kJ)</option>
                            <option value="mj">Megajoules (MJ)</option>
                            <option value="cal">Calories (cal)</option>
                            <option value="kcal" selected>Kilocalories (kcal)</option>
                            <option value="wh">Watt-hours (Wh)</option>
                            <option value="kwh">Kilowatt-hours (kWh)</option>
                            <option value="mwh">Megawatt-hours (MWh)</option>
                            <option value="btu">British Thermal Units (BTU)</option>
                            <option value="mmbtu">Million BTU (MMBTU)</option>
                            <option value="ftlb">Foot-pounds (ft¬∑lb)</option>
                            <option value="ev">Electronvolts (eV)</option>
                            <option value="kev">Kiloelectronvolts (keV)</option>
                            <option value="mev">Megaelectronvolts (MeV)</option>
                            <option value="gev">Gigaelectronvolts (GeV)</option>
                            <option value="tep">Tonnes of oil equivalent (toe)</option>
                            <option value="tce">Tonnes of coal equivalent (tce)</option>
                        </select>
                        <button onclick="convertEnergy()">Convert</button>
                        <span class="result" id="energy-result">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ALL JAVASCRIPT CODE REMAINS EXACTLY THE SAME AS BEFORE -->
    <!-- The entire JavaScript section from the previous version is preserved -->
    <script>
        // ============================================
        // EXPORT/SAVE FUNCTIONALITY - FIXED VERSION
        // ============================================
        
        // Object to store saved inputs
        let savedInputs = {};
        
        // Function to save an input field
        function saveInput(fieldId) {
            const element = document.getElementById(fieldId);
            if (element) {
                savedInputs[fieldId] = element.value;
                
                // Show saved indicator
                const indicator = document.getElementById('saved_' + fieldId);
                if (indicator) {
                    indicator.style.display = 'inline';
                    setTimeout(() => {
                        indicator.style.display = 'none';
                    }, 2000);
                }
                
                console.log('Saved:', fieldId, '=', element.value);
            }
        }
        
        // Function to save notes (contenteditable div)
        function saveNotes() {
            const notesField = document.getElementById('notesField');
            if (notesField) {
                savedInputs['notesField'] = notesField.innerHTML;
                
                // Show saved indicator
                const indicator = document.getElementById('saved_notesField');
                if (indicator) {
                    indicator.style.display = 'inline';
                    setTimeout(() => {
                        indicator.style.display = 'none';
                    }, 2000);
                }
                
                console.log('Notes saved');
            }
        }
        
        // Function to download as standalone HTML - FIXED VERSION
        function downloadAsHTML() {
            // First, ensure all calculations are up to date
            evaluateAllCalculators();
            
            // Create a clone of the current document
            const clone = document.documentElement.cloneNode(true);
            
            // Remove the download button and status from the clone
            const downloadSection = clone.querySelector('div');
            if (downloadSection && downloadSection.querySelector('.download-btn')) {
                downloadSection.remove();
            }
            
            // Create a BETTER initialization script
            const initScript = `
            <script>
            // Initialize saved values on load - FIXED VERSION
            document.addEventListener('DOMContentLoaded', function() {
                // Wait a moment for DOM to be fully ready
                setTimeout(function() {
                    const savedValues = ${JSON.stringify(savedInputs, null, 2)};
                    console.log('Loading saved values:', savedValues);
                    
                    // Set ALL saved values
                    Object.keys(savedValues).forEach(fieldId => {
                        const element = document.getElementById(fieldId);
                        if (element) {
                            if (fieldId === 'notesField') {
                                element.innerHTML = savedValues[fieldId];
                            } else {
                                element.value = savedValues[fieldId];
                                
                                // IMPORTANT: For input fields, trigger the input event
                                // This ensures calculations run with saved values
                                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                                    // Create and dispatch input event
                                    const inputEvent = new Event('input', {
                                        bubbles: true,
                                        cancelable: true
                                    });
                                    element.dispatchEvent(inputEvent);
                                }
                            }
                        }
                    });
                    
                    // After setting all values, trigger a global re-evaluation
                    setTimeout(function() {
                        if (typeof evaluateAllCalculators === 'function') {
                            evaluateAllCalculators();
                        }
                        
                        // Also update variables
                        if (typeof updateVariables === 'function') {
                            updateVariables();
                        }
                    }, 100);
                    
                }, 100);
            });
            <\/script>
            `;
            
            // Convert clone to HTML string
            let htmlString = '<!DOCTYPE html>\n' + clone.outerHTML;
            
            // Insert initialization script before closing body tag
            const bodyEndIndex = htmlString.lastIndexOf('</body>');
            if (bodyEndIndex !== -1) {
                htmlString = htmlString.substring(0, bodyEndIndex) + 
                            initScript + 
                            htmlString.substring(bodyEndIndex);
            }
            
            // Create and download the file
            const blob = new Blob([htmlString], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const timestamp = new Date().toISOString().slice(0, 19).replace(/[:T]/g, '-');
            a.download = `Calculator-${timestamp}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // Show download status
            const status = document.getElementById('downloadStatus');
            if (status) {
                status.textContent = '‚úì Calculator downloaded successfully! It will work offline.';
                setTimeout(() => {
                    status.textContent = '';
                }, 3000);
            }
        }
        
        // ============================================
        // EXISTING CALCULATOR CODE (UNCHANGED)
        // ============================================
        
        // Counter for additional calculators
        let calculatorCount = 2;

        // Function to create a new calculator
        function createCalculator() {
            calculatorCount++;
            const newCalculatorId = calculatorCount;
            
            const calculatorHTML = `
                <div class="calculation-group">
                    <div class="expression-container">
                        <label class="calc-label">Calculator:</label>
                        <input type="text" class="result-input" id="resultField${newCalculatorId}" placeholder="variable name">
                        <button class="save-btn" onclick="saveInput('resultField${newCalculatorId}')">üíæ Save</button>
                        <span class="saved-indicator" id="saved_resultField${newCalculatorId}">‚úì Saved</span>
                        <input type="text" class="notes-input" placeholder="Notes" id="notesField${newCalculatorId}">
                        <button class="save-btn" onclick="saveInput('notesField${newCalculatorId}')">üíæ Save</button>
                        <span class="saved-indicator" id="saved_notesField${newCalculatorId}">‚úì Saved</span>
                    </div>
                    
                    <div class="calc-input-container">
                        <input type="text" class="calc-input" id="inputField${newCalculatorId}" placeholder="e.g., x! + y * sin(z) + log2(a) + b - c + d - e + f + g">
                        <button class="save-btn" onclick="saveInput('inputField${newCalculatorId}')">üíæ Save Expression</button>
                        <span class="saved-indicator" id="saved_inputField${newCalculatorId}">‚úì Saved</span>
                    </div>
                    
                    <div class="result-container">
                        <label class="result-label">Result:</label>
                        <output id="outputField${newCalculatorId}">0</output>
                    </div>
                </div>
            `;
            
            // Insert the new calculator before the "Add More Calculators" button
            const container = document.getElementById('calculatorsContainer');
            const newCalculator = document.createElement('div');
            newCalculator.innerHTML = calculatorHTML;
            container.appendChild(newCalculator);
            
            // Get references to the new elements
            const inputField = document.getElementById(`inputField${newCalculatorId}`);
            const outputField = document.getElementById(`outputField${newCalculatorId}`);
            const resultField = document.getElementById(`resultField${newCalculatorId}`);
            
            // Add event listeners to the new calculator
            inputField.addEventListener('input', function() {
                evaluateExpression(inputField.value, outputField, resultField);
            });
            
            resultField.addEventListener('input', function() {
                updateVariables();
                evaluateAllCalculators();
            });
            
            // Also add save functionality to the new fields
            setTimeout(() => {
                // Ensure the save buttons work
                const saveBtns = newCalculator.querySelectorAll('.save-btn');
                saveBtns.forEach(btn => {
                    if (btn.onclick) {
                        // Already has onclick from template
                    } else {
                        // Add click handler
                        btn.addEventListener('click', function() {
                            const fieldId = this.previousElementSibling.id;
                            saveInput(fieldId);
                        });
                    }
                });
            }, 100);
        }

        // Function to evaluate all calculators
        function evaluateAllCalculators() {
            for (let i = 1; i <= calculatorCount; i++) {
                const inputField = document.getElementById(`inputField${i}`);
                const outputField = document.getElementById(`outputField${i}`);
                const resultField = document.getElementById(`resultField${i}`);
                if (inputField && outputField && resultField) {
                    evaluateExpression(inputField.value, outputField, resultField);
                }
            }
        }

        // Add event listener to the "Add More Calculators" button
        document.getElementById('addCalculatorBtn').addEventListener('click', createCalculator);

        // Add event listener for the unit converter button
        document.getElementById('unitConverterBtn').addEventListener('click', function() {
            // Open unit converter in a new window
            window.open('unitconverter.html', 'UnitConverter', 'width=800,height=800,scrollbars=yes');
        });

        // Get references to the input fields and output fields
        const variableNameInputs = [
            document.getElementById('variableName1'),
            document.getElementById('variableName2'),
            document.getElementById('variableName3'),
            document.getElementById('variableName4'),
            document.getElementById('variableName5'),
            document.getElementById('variableName6'),
            document.getElementById('variableName7'),
            document.getElementById('variableName8'),
            document.getElementById('variableName9'),
            document.getElementById('variableName10')
        ];

        const variableValueInputs = [
            document.getElementById('variableValue1'),
            document.getElementById('variableValue2'),
            document.getElementById('variableValue3'),
            document.getElementById('variableValue4'),
            document.getElementById('variableValue5'),
            document.getElementById('variableValue6'),
            document.getElementById('variableValue7'),
            document.getElementById('variableValue8'),
            document.getElementById('variableValue9'),
            document.getElementById('variableValue10')
        ];

        const inputField1 = document.getElementById('inputField1');
        const outputField1 = document.getElementById('outputField1');
        const resultField1 = document.getElementById('resultField1');
        const inputField2 = document.getElementById('inputField2');
        const outputField2 = document.getElementById('outputField2');
        const resultField2 = document.getElementById('resultField2');
        const notesField = document.getElementById('notesField');

        // Object to store user-defined variables
        let variables = {};

        // Function to update variables
        function updateVariables() {
            // Clear existing variables
            variables = {};

            // Update regular variables
            for (let i = 0; i < variableNameInputs.length; i++) {
                const name = variableNameInputs[i].value.trim();
                const value = parseFloat(variableValueInputs[i].value.trim());
                if (name && !isNaN(value)) {
                    variables[name] = value;
                }
            }
            
            // Update result variables from all calculators
            for (let i = 1; i <= calculatorCount; i++) {
                const resultField = document.getElementById(`resultField${i}`);
                const outputField = document.getElementById(`outputField${i}`);
                if (resultField && outputField) {
                    const resultName = resultField.value.trim();
                    const resultValue = parseFloat(outputField.textContent);
                    if (resultName && !isNaN(resultValue)) {
                        variables[resultName] = resultValue;
                    }
                }
            }
        }

        // Function to replace variable names and constants with their values
        function replaceVariables(expression) {
            // Replace pi with Math.PI
            expression = expression.replace(/\bpi\b/g, Math.PI);

            // Replace g with 9.8 (acceleration due to gravity)
            expression = expression.replace(/\bg\b/g, 9.8);

            // Replace variable names with their values
            for (const [name, value] of Object.entries(variables)) {
                const regex = new RegExp(`\\b${name}\\b`, 'g');
                expression = expression.replace(regex, value);
            }
            return expression;
        }

        // Function to calculate factorial
        function factorial(n) {
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        // Function to convert degrees to radians
        function toRadians(degrees) {
            return degrees * (Math.PI / 180);
        }

        // Function to convert radians to degrees
        function toDegrees(radians) {
            return radians * (180 / Math.PI);
        }

        // Function to replace logx(y) with the appropriate JavaScript expression
        function replaceLogSyntax(expression) {
            // Regular expression to match logx(y) syntax
            const logRegex = /log(\d+|e)\(([^)]+)\)/g;
            return expression.replace(logRegex, (match, base, y) => {
                if (base === 'e') {
                    // Natural logarithm (base e)
                    return `Math.log(${y})`;
                } else {
                    // Logarithm with custom base using the change of base formula
                    return `(Math.log(${y}) / Math.log(${base}))`;
                }
            });
        }

        // Function to replace trigonometric functions with their evaluated values
        function replaceTrigFunctions(expression) {
            // Replace sin(x) with Math.sin(toRadians(x))
            expression = expression.replace(/sin\(([^)]+)\)/g, (match, x) => {
                return `Math.sin(toRadians(${x}))`;
            });
            // Replace cos(x) with Math.cos(toRadians(x))
            expression = expression.replace(/cos\(([^)]+)\)/g, (match, x) => {
                return `Math.cos(toRadians(${x}))`;
            });
            // Replace tan(x) with Math.tan(toRadians(x))
            expression = expression.replace(/tan\(([^)]+)\)/g, (match, x) => {
                return `Math.tan(toRadians(${x}))`;
            });
            // Replace cosec(x) with 1 / Math.sin(toRadians(x))
            expression = expression.replace(/cosec\(([^)]+)\)/g, (match, x) => {
                return `(1 / Math.sin(toRadians(${x})))`;
            });
            // Replace sec(x) with 1 / Math.cos(toRadians(x))
            expression = expression.replace(/sec\(([^)]+)\)/g, (match, x) => {
                return `(1 / Math.cos(toRadians(${x})))`;
            });
            // Replace cot(x) with 1 / Math.tan(toRadians(x))
            expression = expression.replace(/cot\(([^)]+)\)/g, (match, x) => {
                return `(1 / Math.tan(toRadians(${x})))`;
            });
            return expression;
        }

        // Function to replace inverse trigonometric functions with their evaluated values
        function replaceInverseTrigFunctions(expression) {
            // Replace sin-1(x) with toDegrees(Math.asin(x))
            expression = expression.replace(/sin-1\(([^)]+)\)/g, (match, x) => {
                return `toDegrees(Math.asin(${x}))`;
            });
            // Replace cos-1(x) with toDegrees(Math.acos(x))
            expression = expression.replace(/cos-1\(([^)]+)\)/g, (match, x) => {
                return `toDegrees(Math.acos(${x}))`;
            });
            // Replace tan-1(x) with toDegrees(Math.atan(x))
            expression = expression.replace(/tan-1\(([^)]+)\)/g, (match, x) => {
                return `toDegrees(Math.atan(${x}))`;
            });
            // Replace cosec-1(x) with toDegrees(Math.asin(1 / x))
            expression = expression.replace(/cosec-1\(([^)]+)\)/g, (match, x) => {
                return `toDegrees(Math.asin(1 / ${x}))`;
            });
            // Replace sec-1(x) with toDegrees(Math.acos(1 / x))
            expression = expression.replace(/sec-1\(([^)]+)\)/g, (match, x) => {
                return `toDegrees(Math.acos(1 / ${x}))`;
            });
            // Replace cot-1(x) with toDegrees(Math.atan(1 / x))
            expression = expression.replace(/cot-1\(([^)]+)\)/g, (match, x) => {
                return `toDegrees(Math.atan(1 / ${x}))`;
            });
            return expression;
        }

        // Function to replace factorial syntax (x!) with the factorial function call
        function replaceFactorialSyntax(expression) {
            // Regular expression to match x! syntax
            const factorialRegex = /(\d+)!/g;
            return expression.replace(factorialRegex, (match, x) => {
                return `factorial(${x})`;
            });
        }

        // Function to evaluate a mathematical expression
        function evaluateExpression(expression, outputField, resultField) {
            try {
                // Update variables when the calculation input changes
                updateVariables();

                // Replace variable names and constants with their values
                expression = replaceVariables(expression);

                // Replace the ^ symbol with ** for exponentiation
                expression = expression.replace(/\^/g, '**');
                // Replace the letter 'e' with Math.E (Euler's constant)
                expression = expression.replace(/\be\b/g, Math.E);
                // Replace logx(y) syntax with the appropriate JavaScript expression
                expression = replaceLogSyntax(expression);
                // Replace trigonometric functions with their evaluated values
                expression = replaceTrigFunctions(expression);
                // Replace inverse trigonometric functions with their evaluated values
                expression = replaceInverseTrigFunctions(expression);
                // Replace factorial syntax (x!) with the factorial function call
                expression = replaceFactorialSyntax(expression);
                // Evaluate the mathematical expression
                const result = eval(expression);
                // Update the output field with the result
                outputField.textContent = result;
                
                // If the result field has a name, update variables with the new value
                updateVariables();
            } catch (error) {
                // If there's an error (e.g., invalid input), display an error message
                outputField.textContent = 'Invalid Expression';
            }
        }

        // Add event listeners to the input fields
        inputField1.addEventListener('input', function () {
            evaluateExpression(inputField1.value, outputField1, resultField1);
        });

        inputField2.addEventListener('input', function () {
            evaluateExpression(inputField2.value, outputField2, resultField2);
        });

        // Add event listeners to all variable value fields
        variableValueInputs.forEach(input => {
            input.addEventListener('input', function () {
                // Re-evaluate all calculators when a variable value changes
                evaluateAllCalculators();
            });
        });
        
        // Add event listeners to all variable name fields too
        variableNameInputs.forEach(input => {
            input.addEventListener('input', function () {
                // Re-evaluate all calculators when a variable name changes
                evaluateAllCalculators();
            });
        });
        
        // Add event listeners to result fields to update variables when they change
        resultField1.addEventListener('input', function() {
            updateVariables();
            evaluateAllCalculators();
        });
        
        resultField2.addEventListener('input', function() {
            updateVariables();
            evaluateAllCalculators();
        });


        // Unit Converter Functions
        function showUnitConverter() {
            document.getElementById('unitConverterModal').style.display = 'block';
        }

        function closeUnitConverter() {
            document.getElementById('unitConverterModal').style.display = 'none';
        }

        // Length conversion factors (to meters)
        const lengthFactors = {
            pm: 1e-12, nm: 1e-9, Œºm: 1e-6, mm: 0.001, cm: 0.01, 
            dm: 0.1, m: 1, dam: 10, hm: 100, km: 1000,
            in: 0.0254, ft: 0.3048, yd: 0.9144, mi: 1609.344,
            nmi: 1852, ly: 9.461e+15, au: 1.496e+11, pc: 3.086e+16
        };

        // Weight conversion factors (to kilograms)
        const weightFactors = {
            Œºg: 1e-9, mg: 0.000001, cg: 0.00001, dg: 0.0001,
            g: 0.001, dag: 0.01, hg: 0.1, kg: 1, t: 1000,
            oz: 0.0283495, lb: 0.453592, st: 6.35029,
            ust: 907.185, ukt: 1016.05
        };

        // Volume conversion factors (to liters)
        const volumeFactors = {
            Œºl: 0.000001, ml: 0.001, cl: 0.01, dl: 0.1,
            l: 1, dal: 10, hl: 100, kl: 1000, m3: 1000,
            tsp: 0.00492892, tbsp: 0.0147868, floz: 0.0295735,
            cup: 0.236588, pt: 0.473176, qt: 0.946353,
            gal: 3.78541, in3: 0.0163871, ft3: 28.3168, yd3: 764.555
        };

        // Area conversion factors (to square meters)
        const areaFactors = {
            mm2: 0.000001, cm2: 0.0001, m2: 1, ha: 10000,
            km2: 1000000, in2: 0.00064516, ft2: 0.092903,
            yd2: 0.836127, ac: 4046.86, mi2: 2589988.11
        };

        // Pressure conversion factors (to pascals)
        const pressureFactors = {
            pa: 1, kpa: 1000, mpa: 1000000, bar: 100000,
            mbar: 100, atm: 101325, mmhg: 133.322,
            inhg: 3386.39, psi: 6894.76, psf: 47.8803
        };

        // Flow conversion factors (to liters per second)
        const flowFactors = {
            lps: 1, lpm: 1/60, lph: 1/3600, m3ps: 1000,
            m3pm: 1000/60, m3ph: 1000/3600, mlps: 0.001,
            mlpm: 0.001/60, mlph: 0.001/3600, gps: 3.78541,
            gpm: 3.78541/60, gph: 3.78541/3600, cfm: 28.3168/60,
            cfh: 28.3168/3600
        };

        // Energy conversion factors (to joules)
        const energyFactors = {
            j: 1, kj: 1000, mj: 1000000, cal: 4.184,
            kcal: 4184, wh: 3600, kwh: 3600000,
            mwh: 3600000000, btu: 1055.06, mmbtu: 1055056000,
            ftlb: 1.35582, ev: 1.60218e-19, kev: 1.60218e-16,
            mev: 1.60218e-13, gev: 1.60218e-10, tep: 41868000000,
            tce: 29307600000
        };

        function convertLength() {
            const value = parseFloat(document.getElementById('length-value').value);
            const fromUnit = document.getElementById('length-from').value;
            const toUnit = document.getElementById('length-to').value;
            
            if (isNaN(value)) {
                document.getElementById('length-result').textContent = 'Invalid input';
                return;
            }
            
            const meters = value * lengthFactors[fromUnit];
            const result = meters / lengthFactors[toUnit];
            document.getElementById('length-result').textContent = result.toFixed(6);
        }

        function convertWeight() {
            const value = parseFloat(document.getElementById('weight-value').value);
            const fromUnit = document.getElementById('weight-from').value;
            const toUnit = document.getElementById('weight-to').value;
            
            if (isNaN(value)) {
                document.getElementById('weight-result').textContent = 'Invalid input';
                return;
            }
            
            const kg = value * weightFactors[fromUnit];
            const result = kg / weightFactors[toUnit];
            document.getElementById('weight-result').textContent = result.toFixed(6);
        }

        function convertVolume() {
            const value = parseFloat(document.getElementById('volume-value').value);
            const fromUnit = document.getElementById('volume-from').value;
            const toUnit = document.getElementById('volume-to').value;
            
            if (isNaN(value)) {
                document.getElementById('volume-result').textContent = 'Invalid input';
                return;
            }
            
            const liters = value * volumeFactors[fromUnit];
            const result = liters / volumeFactors[toUnit];
            document.getElementById('volume-result').textContent = result.toFixed(6);
        }

        function convertArea() {
            const value = parseFloat(document.getElementById('area-value').value);
            const fromUnit = document.getElementById('area-from').value;
            const toUnit = document.getElementById('area-to').value;
            
            if (isNaN(value)) {
                document.getElementById('area-result').textContent = 'Invalid input';
                return;
            }
            
            const m2 = value * areaFactors[fromUnit];
            const result = m2 / areaFactors[toUnit];
            document.getElementById('area-result').textContent = result.toFixed(6);
        }

        function convertTemperature() {
            const value = parseFloat(document.getElementById('temp-value').value);
            const fromUnit = document.getElementById('temp-from').value;
            const toUnit = document.getElementById('temp-to').value;
            
            if (isNaN(value)) {
                document.getElementById('temp-result').textContent = 'Invalid input';
                return;
            }
            
            let celsius;
            switch(fromUnit) {
                case 'c': celsius = value; break;
                case 'f': celsius = (value - 32) * 5/9; break;
                case 'k': celsius = value - 273.15; break;
                case 'r': celsius = (value - 491.67) * 5/9; break;
            }
            
            let result;
            switch(toUnit) {
                case 'c': result = celsius; break;
                case 'f': result = celsius * 9/5 + 32; break;
                case 'k': result = celsius + 273.15; break;
                case 'r': result = (celsius + 273.15) * 9/5; break;
            }
            
            document.getElementById('temp-result').textContent = result.toFixed(6);
        }

        function convertPressure() {
            const value = parseFloat(document.getElementById('pressure-value').value);
            const fromUnit = document.getElementById('pressure-from').value;
            const toUnit = document.getElementById('pressure-to').value;
            
            if (isNaN(value)) {
                document.getElementById('pressure-result').textContent = 'Invalid input';
                return;
            }
            
            const pascals = value * pressureFactors[fromUnit];
            const result = pascals / pressureFactors[toUnit];
            document.getElementById('pressure-result').textContent = result.toFixed(6);
        }

        function convertFlow() {
            const value = parseFloat(document.getElementById('flow-value').value);
            const fromUnit = document.getElementById('flow-from').value;
            const toUnit = document.getElementById('flow-to').value;
            
            if (isNaN(value)) {
                document.getElementById('flow-result').textContent = 'Invalid input';
                return;
            }
            
            const lps = value * flowFactors[fromUnit];
            const result = lps / flowFactors[toUnit];
            document.getElementById('flow-result').textContent = result.toFixed(6);
        }

        function convertEnergy() {
            const value = parseFloat(document.getElementById('energy-value').value);
            const fromUnit = document.getElementById('energy-from').value;
            const toUnit = document.getElementById('energy-to').value;
            
            if (isNaN(value)) {
                document.getElementById('energy-result').textContent = 'Invalid input';
                return;
            }
            
            const joules = value * energyFactors[fromUnit];
            const result = joules / energyFactors[toUnit];
            document.getElementById('energy-result').textContent = result.toFixed(6);
        }


    </script>

<script>
let deferredPrompt;
window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    document.getElementById("installApp").style.display = "block";
    
    document.getElementById("installApp").addEventListener("click", () => {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === "accepted") {
                console.log("App Installed");
            }
            deferredPrompt = null;
        });
    });
});
</script>
    <script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js").then(() => {
        console.log("Service Worker Registered!");
    });
}
</script>

    
</body>
</html>
